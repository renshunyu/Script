#!/bin/sh
export JAVA_HOME=/usr/java/jdk1.8.0_121
export ANT_HOME=/home/aiuap/tools/apache-ant-1.7.1
export PATH=$JAVA_HOME/bin:$ANT_HOME/bin:$PATH
export CLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar


packagepath=/home/aiuap/svnproject/program30/builddir
svnurl=http://10.1.198.30/svn/UAPPROGRAM/products/ailkiap30/program/reportc

cd $packagepath
result=$?
if [ $result != '0' ]
then
  echo "«–ªªƒø¬º¥ÌŒÛ"
  exit 1
fi

if [ -d reportc ]; then
  rm -fr reportc
fi


svn checkout $svnurl
result=$?
if [ $result != '0' ]
then
  echo "«©≥ˆƒø¬º¥ÌŒÛ"
  exit 1
fi


cd reportc
result=$?
if [ $result != '0' ]
then
  echo "«–ªªƒø¬º¥ÌŒÛ"
  exit 1
fi

svn update 

ant >./build.log
result=`cat build.log|grep -i "BUILD SUCCESSFUL"|wc -l`
if [ $result != '1' ]
then
  echo "±‡“Î±®¥Ì"
  exit 1
fi
echo "±‡“Î≥…π¶"

